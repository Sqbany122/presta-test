<!doctype html>  
<!--[if IE 6 ]><html lang="en-us" class="ie6"> <![endif]-->
<!--[if IE 7 ]><html lang="en-us" class="ie7"> <![endif]-->
<!--[if IE 8 ]><html lang="en-us" class="ie8"> <![endif]-->
<!--[if (gt IE 7)|!(IE)]><!-->
<html lang="pl-pl"><!--<![endif]-->
<head>
	<meta charset="utf-8">
	<title>OmniPrice - Moduł dla PrestaShop</title>
	<meta name="description" content="">
	<meta name="author" content="Dariusz Tryba | GreenMouseStudio.com">
	<meta name="copyright" content="Dariusz Tryba | GreenMouseStudio.com">
	<meta name="generator" content="Documenter v2.0 http://rxa.li/documenter">
	<meta name="date" content="2015-12-21T00:00:00+01:00">

	<link rel="stylesheet" href="assets/css/documenter_style.css" media="all">

	<style>
		html{background-color:#EFEFEF;color:#1C140D;scroll-behavior: smooth;}
		::-moz-selection{background:#CBE86B;color:#1C140D;}
		::selection{background:#CBE86B;color:#1C140D;}
		#documenter_sidebar #documenter_logo{background-image:url();}
		a{color:#889C48;}
		.btn {
			border-radius:3px;
		}
		.btn-primary {
			  background-image: -moz-linear-gradient(top, #CBE86B, #889C48);
			  background-image: -ms-linear-gradient(top, #CBE86B, #889C48);
			  background-image: -webkit-gradient(linear, 0 0, 0 CBE86B%, from(#F2E9E1), to(#889C48));
			  background-image: -webkit-linear-gradient(top, #CBE86B, #889C48);
			  background-image: -o-linear-gradient(top, #CBE86B, #889C48);
			  background-image: linear-gradient(top, #CBE86B, #889C48);
			  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#CBE86B', endColorstr='#889C48', GradientType=0);
			  border-color: #889C48 #889C48 #bfbfbf;
			  color:#FFFFFF;
		}
		.btn-primary:hover,
		.btn-primary:active,
		.btn-primary.active,
		.btn-primary.disabled,
		.btn-primary[disabled] {
		  border-color: #CBE86B #CBE86B #bfbfbf;
		  background-color: #889C48;
		}
		hr{border-top:1px solid #CCCCCC;border-bottom:1px solid #FFFFFF;}
		#documenter_sidebar, #documenter_sidebar ul a{background-color:#F2E9E1;color:#1C140D;}
		#documenter_sidebar ul a{-webkit-text-shadow:1px 1px 0px #FFF6ED;-moz-text-shadow:1px 1px 0px #FFF6ED;text-shadow:1px 1px 0px #FFF6ED;}
		#documenter_sidebar ul{border-top:1px solid #D1C9C2;}
		#documenter_sidebar ul a{border-top:1px solid #FFF6ED;border-bottom:1px solid #D1C9C2;color:#1C140D;}
		#documenter_sidebar ul a:hover{background:#CBE86B;color:#1C140D;border-top:1px solid #CBE86B;}
		#documenter_sidebar ul a.current{background:#CBE86B;color:#1C140D;border-top:1px solid #CBE86B;}
		#documenter_copyright{display:block !important;visibility:visible !important;}
		.inline-code {
		    padding: 0 10px;
			background: #fdfdfd;
			border: 1px solid #ccc;
			display: inline-block;
			margin: 10px;
		}
	</style>
	
</head>
<body class="documenter-project-show-payment-methods">
	<div id="documenter_sidebar">
		<a href="#documenter_cover" id="documenter_logo"></a>
		<ul id="documenter_nav">
			<li><a class="current" href="#documenter_cover">Start</a></li>
			<li><a href="#description" title="Description">Opis</a></li>
			<li><a href="#installation" title="Installation">Instalacja</a></li>
			<li><a href="#configuration" title="Configuration">Konfiguracja</a></li>
		</ul>
		<div id="documenter_copyright">Copyright Dariusz Tryba | GreenMouseStudio.com<br>
		made with the <a href="http://rxa.li/documenter">Documenter v2.0</a> 
		</div>
	</div>
	<div id="documenter_content">
	<section id="documenter_cover">
	<h1>OmniPrice</h1>
	<h2>Moduł dla PrestaShop</h2>
	<hr>
	<ul>
	<li>autor: Dariusz Tryba | GreenMouseStudio.com</li>
	<li><a href=""></a></li>
	<li>email: <a href="mailto:&#99;&#111;&#110;&#116;&#97;&#99;&#116;&#64;&#103;&#114;&#101;&#101;&#110;&#109;&#111;&#117;&#115;&#101;&#115;&#116;&#117;&#100;&#105;&#111;&#46;&#99;&#111;&#109;">&#99;&#111;&#110;&#116;&#97;&#99;&#116;&#64;&#103;&#114;&#101;&#101;&#110;&#109;&#111;&#117;&#115;&#101;&#115;&#116;&#117;&#100;&#105;&#111;&#46;&#99;&#111;&#109;</a></li>
	</ul>
	<p>Dziękujemy za zakup tego modułu. W razie jakichkolwiek pytań lub wątpliwości, zapraszamy do kontaktu.</p>
	</section>

	<section id="description">
	<div class="page-header"><h3>Opis</h3><hr class="notop"></div>
		<p>Celem tego modułu jest pomóc Ci uczynić sklep zgodnym z unijną dyrektywą Omnibus.</p>
		<p>Jednym z jej wymogów jest poinformowanie klienta o najniższej cenie, jaką miał produkt w okresie 30 dni przed rozpoczęciem aktualnej obniżki. Wymóg ten dotyczy tylko produktów przecenionych.</p>
		<p>Moduł wyświetla na stronie przecenionego produktu dodatkową etykietę z informacją o jego najniższej historycznej cenie.</p>
	</section>
	<section id="installation">
	<div class="page-header"><h3>Instalacja</h3><hr class="notop"></div>
	<ul>
		<li>
			zaloguj się do zaplecza swojego sklepu PrestaShop</li>
		<li>
			wejdź w zakładkę Moduły</li>
		<li>
			wybierz opcję &quot;Załaduj moduł&quot;</li>
		<li>
			wybierz i wgraj plik &quot;gm_omniprice.zip&quot;</li>
		<li>
			skonfiguruj moduł</li>
		<li>ustaw zadanie CRON, aby moduł codziennie dokonywał przeglądu cen produktów</li>
	</ul>
	<p>Jeżeli pojawi się nowa wersja modułu, otrzymasz automatyczne powiadomienie na maila. Aby zaktualizować moduł, wgraj ponownie plik &quot;gm_omniprice.zip&quot;, a następnie wybierz opcję Aktualizuj. <b>Uwaga!</b> każda reinstalacja modułu (czy użycie opcji "Wyczyść") spowoduje usunięcie historii cen.</p>
	</section>
	<section id="configuration">
	<div class="page-header"><h3>Konfiguracja</h3><hr class="notop"></div>
		<p>Moduł posiada następujące ustawienia:</p>
		<ul>
			<li><b>Okres</b> - liczba dni podlegających analizie historii cen</li>
			<li><b>Ignoruj kraje</b> - analizowanie historii cen tylko dla domyślnego kraju (klientom z innych krajów wyświetlana będzie informacja o cenie historycznej dla domyślnego kraju)</li>
			<li><b>Ignoruj kombinacje</b> - zapisywanie historii cen tylko dla domyślnej kombinacji produktu (nawet przy wyborze innych kombinacji, wyświetlana będzie cena historyczna domyślnej kombinacji, zalecane ignorowanie jeżeli kombinacje nie wpływają na ceny produktów)</li>
			<li><b>Ignorowane grupy</b> - umożliwia wybór grup klientów, które będą ignorowane podczas analizy cen. Dla klientów z tych grup, wyświetlane będą ceny historyczne takie jak dla grupy Klient. Domyślnie ustawione jest ignorowanie grupy Odwiedzający i Gość. Zalecane jest ustawienie ignorowania grup jeżeli ceny na sklepie nie są uzależniane od grupy klienta (a najczęściej nie są przynajmniej dla odwiedzającego i gościa, więc nie ma potrzeby zapisywania cen dla tych grup).</li>
			<li><b>Pakiet produktów</b> - liczba produktów przetwarzana podczas jednego uruchomienia zadania CRON. Domyślnie ustawiona na 1000. Można zwiększyć jeżeli nie ma problemów z wydajnością działania skryptu. Można zmniejszyć aby nie przetwarzać zbyt dużo danych na raz, ale wówczas trzeba upewnić się, że zadanie CRON jest uruchamiane na tyle często, aby każdego dnia wszystkie produkty zostały przeanalizowane.</li>
			<li><b>Reindeksuj podczas zapisu produktu</b> - wykonuje analizę cen produktu podczas każdego jego zapisu. Reindeksowanie produktu o wielu kombinacjach, na sklepie o wielu krajach, walutach, grupach itd. może być czasochłonne. W takiej sytuacji można wyłączyć tę opcję, a zapisywanie historii cen zostawić dla zadania CRON, upewniając się, że jest ono uruchomione odpowiednio często. W przypadku wyłączenia tej opcji zadanie CRON powinno działać cyklicznie we wszystkich godzinach, gdy mogą zmieniać się ceny, aby zapamiętać cenę produktu możliwie niedługo po jej zmianie w panelu.</li>
			<li><b>Kolor tekstu, kolor tła, kolor ceny</b> - opcje pozwalają dopasować wygląd komunikatu o najniższej cenie do szablonu sklepu.</li>
		</ul>
		<p><b>Testowanie wyglądu i poprawnej instalacji modułu</b></p>
		<p>Po instalacji moduł można przetestować poprzez dodanie do adresu URL strony produktu dodatkowego parametru <span class="inline-code">?omnipricetest=XXX</span>.</p>
		<p><b><span style="color: red;">Bardzo ważne</span> uwagi związane z wydajnością!</b></p>
		<p>Zgromadzenie historii cen dla dużych sklepów może skończyć się większym rozmiarem bazy danych. Moduł musi zapamiętać ceny dla wszystkich krajów, grup klientów, kombinacji, walut itd. Te ceny zależne są od wielu czynników w momencie ich obowiązywania, dlatego nie staramy się ich obliczać, a zapamiętujemy je w bazie.</p>
		<p>Moduł jest zoptymalizowany aby zapamiętywać tylko niezbędne dane (momenty zmian cen), ale zalecamy upewnić się, że zostało zrobione wszystko co możliwe aby moduł nie zapisywał niepotrzebnych cen:</p>
		<ul>
			<li>wyłączenie nieużywanych walut</li>
			<li>wyłaczenie krajów, do których nie jest faktycznie prowadzona sprzedaż (lub włączenie ignorowania krajów jeżeli ceny na sklepie nie są uzależnione od krajów)</li>
			<li>włączenie ignorowania grup, dla których nie są stosowane żadne rabaty grupowe, jak również pustych grup, nie posiadających żadnych przypisanych klientów</li>
		</ul>
		<p>Różnica w liczbie cen do zapamiętania może być olbrzymia. Na przykład jeżeli sklep ma włączone wszystkie możliwe kraje świata i nie jest ustawione ich ignorowanie, moduł będzie zapisywał w historii kilkadziesiąt razy więcej cen, niż jest to potrzebne.</p>
		<p>Zadanie CRON do gromadzenia historii cen powinno być ustawione tak często jak jest to potrzebne, aby moduł był w stanie przejrzeć ceny wszystkich produktów w ciągu dnia. Potrzebną liczbę wywołań zadania CRON można sprawdzić uruchamiając je w przeglądarce tak długo, aż pojawi się informacja, że wszystkie produkty zostały zaindeksowane. Ponieważ ceny na sklepie mogą pochodzić z różnych źródeł (np. promocji zaplanowanych wcześniej), nie zaszkodzi jeżeli to zadanie będzie uruchamiane częściej. Zalecamy minimum raz na godzinę.</p>
		<p>Zadanie CRON posiada możliwość uruchomienia z dodatkowym parametrem <span class="inline-code">&amp;reset</span>. Powoduje to rozpoczęcie indeksacji produktów od nowa (tylko dla bieżącego dnia). Parametr ten może być przydatny jeżeli w sklepie ceny wstrzykiwane są bezpośrednio do bazy danych przy pomocy przeróżnych integratorów lub zewnętrznych programów. Takie ceny też zostaną zauważone, ale może to nastąpić z większym opóźnieniem, dlatego zrestowanie indeksu może pomóc zniwelować to opóźnienie.</p>
		<p>Skrypt czyszczący wystarczy ustawić nie częściej niż raz dziennie. Usuwa on z historii stare ceny, które nie są już niezbędne do określenia ceny historycznej. Czyli np. jeżeli produkt w sierpniu kosztował normalnie 100zł, potem we wrześniu 120zł, potem w październiku 130zł i np. teraz dostanie promocję -10%, to moduł usunie ceny z sierpnia i września, bo w okresie 30 dni od startu promocji obowiązywała już od dłuższego czasu cena październikowa i ona jest wystarczająca do określenia tego jaka była najniższa cena produktu od momentu wprowadzenia promocji.</p>
		<h3>Zainstalowałeś moduł, ale nie widzisz cen historycznych?</h3>
		<p>Spokojnie, moduł potrzebuje trochę czasu, aby zebrać informację o cenach. Domyślnie PrestaShop nie przechowuje żadnych danych na temat zmian cen, moduł musi je zgromadzić samodzielnie.</p>
		<p>Aby wyświetlały się ceny, muszą być spełnione następujące warunki:</p>
		<ol>
			<li>Aktualna cena jest ceną promocyjną.</li>
			<li>W historii cen jest zapisana przynajmniej jedna poprzednia cena, różna od aktualnej.</li>
			<li>Z szablonu karty produktu nie został usunięty zaczep displayProductPriceBlock z parametrem type="after_price" (powinien być domyślnie w każdym szablonie, ale różnie z tym bywa). Jeżeli po dodaniu do adresu URL karty produktu parametru <span class="inline-code">?omnipricetest=XXX</span> nic się nie wyświetla, to najczęściej oznacza, że w szablonie brakuje tego zaczepu.</li>
		</ol>
		<p>Warto też pamiętać, że aby oszczędzić miejsce w bazie danych, moduł zapamiętuje w danym dniu cenę tylko raz, tylko jeżeli nastąpiła zmiana w stosunku do ceny poprzedniej i tylko jeżeli produkt jest aktywny. Dlatego jeżeli natychmiast po instalacji modułu jakiemuś produktowi zostanie nadana promocja, to informacja o cenie historycznej nie zostanie pokazana, bo nie istnieje jeszcze żadna historia poprzednich cen.</p>
		<p>W 99% przypadków, aby moduł zaczął poprawnie działać, wystarczy dać mu trochę czasu na zgromadzenie historii cen oraz upewnić się, że ceny zmieniały się już po instalacji modułu, a nie przed i w kolejnych dniach różniły się od siebie.</p>
		<p>W zakładce Moduły na karcie produktu na zapleczu, podejrzeć można zapisaną historię zmian cen produktu, co może być pomocne do analizy tego, jaka cena (i czy w ogóle) powinna się wyświetlać.</p>
		<h3>Co jeżeli masz na sklepie "stare" promocje sprzed instalacji modułu?</h3>
		<p>W idealnym świecie, przepisy zostałyby ogłoszone gdzieś w listopadzie 2022 roku, aby dać sprzedawcom czas na zgromadzenie historii cen. Niestety ustawa została podpisana końcem grudnia i wiele sklepów o nowych przepisach dowiedziało się dopiero w styczniu.</p>
		<p>Dlatego jeżeli masz na sklepie już jakieś stare promocje to niestety moduł nie zna cen, jakie były przed ich wejściem w życie.</p>
		<p>W takiej sytuacji najlepiej przed instalacją modułu wyłączyć wszystkie promocje. Następnie instalujemy moduł i indeksujemy wszystkie ceny. Kolejnego dnia włączamy promocje z powrotem i znów indeksujemy ceny. Może to być trochę uciążliwe, ale jest to optymalny sposób, aby móc w razie czego udowodnić, że ma się zachowaną cenę historyczną sprzed startu promocji.</p>
		</section>
	</div>
</body>
</html>